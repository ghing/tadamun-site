{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","js/src/app.js"],"names":[],"mappings":"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","file":"app.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import d3 from 'd3';\n\n// HACK: I couldn't get waypoints to shim correctly with browserify.  It does\n// make itself available as window.Waypoint. \nimport 'waypoints';\nlet Waypoint = window.Waypoint;\n\n// TODO: replace with UMD\n(function(window) {\n  let tadamun = {};\n\n  class App {\n    constructor(options) {\n      let app = this;\n      let mapSections = d3.select(options.containers.mapSections)\n        .selectAll('.section--map');\n      let mapLayers = d3.select(options.containers.mapLayers);  \n\n      this.options = options;\n\n      this.waypoints = {};\n\n      // When the highway enters the viewport, start the animation\n      // Note that we detect when the #filler-1 element enters,\n      // rather than #highway\n      // due to the way we're making elements sticky\n      this.waypoints.highway = new Waypoint({\n        element: d3.select('#filler-1').node(), \n        handler: function(direction) {\n          if (direction == 'down') {\n            d3.select(options.containers.highway)\n              .selectAll('.section__inner')\n                .classed('animated', true);\n          }\n        },\n        offset: '100%' \n      });\n\n      this.waypoints.map = new Waypoint({\n        element: options.containers.mapSections,\n        handler: function(direction) {\n          if (direction === 'down') {\n            mapLayers\n              .style('position', 'fixed')\n              .style('top', 0);\n          }\n          else {\n            // We're scrolling back up to the top.  Unstick the map layers so\n            // the user can see the intro section\n            mapLayers\n              .style('position', 'static')\n              .style('top', 'auto');\n\n            mapSections.style('position', 'static');\n          }\n        }\n      });\n\n      mapSections.style('visibility', 'hidden');\n      this.hideMapLayers(['schools', 'healthcare-centers', 'quotes-istabl-antwar', 'quotes-masakin-uthman']);\n\n      mapSections.each(function(d, i) {\n        var el = this;\n\n        // When scrolling down, and the top of a section hits the bottom\n        // of the viewport ...\n        let wp = new Waypoint({\n          element: el,\n          handler: function(direction) {\n            if (direction == 'down') {\n              // Unstick all the sections \n              mapSections.style('position', 'static');\n              // Hide all the sections \n              mapSections.style('visibility', 'hidden');\n\n              // Stick and show this section\n              app.displaySection(this.element);\n\n              if (this.element.id == 'filler-2') {\n                // We've scrolled past all the map sections.  Unstick these sections\n                mapSections.style('position', 'static');\n                // Unstick the map layers\n                mapLayers.style('position', 'static');\n                // Make the filler layers zero height so the elements all stay in place\n                // after the fixed elements are no longer fixed position\n                d3.select('#filler-1').style('display', 'none');\n                d3.select('#filler-2').style('display', 'none');\n              }\n            }\n          },\n          offset: '100%'\n        });\n\n        // When scrolling up, and the bottom of a section enters the top\n        // of the viewport ...\n        let reverseWp = new Waypoint({\n          element: el,\n          handler: function(direction) {\n            if (direction == 'up') {\n              if (this.element.id == 'filler-1') {\n                // Scrolling back into the map sections\n                // Make the map layers stick\n                mapLayers.style('position', 'fixed');\n                // Give the filler sections a height so everything sits in the right place\n                d3.select('#filler-1').style('display', 'block');\n                d3.select('#filler-2').style('display', 'block');\n              }\n\n              // Unstick all the sections\n              mapSections.style('position', 'static');\n              // Hide all the sections\n              mapSections.style('visibility', 'hidden');\n\n              // Stick and show this section\n              app.displaySection(this.element);\n            }\n          },\n          offset: 'bottom-in-view'\n        });\n      });\n    }\n\n    displaySection(element, position='fixed') {\n      d3.select(element)\n        .style('visibility', 'visible')\n        .style('position', position)\n        .style('top', 0);\n\n      if (element.id == 'distance') {\n        this.showMapLayers(['distance']);\n        this.hideMapLayers(['schools', 'healthcare-centers', 'quotes-istabl-antwar', 'quotes-masakin-uthman']);\n        this.hideMapLayers(['schools']);\n      }\n      else {\n        this.hideMapLayers(['distance']);\n      }\n\n      if (element.id == 'schools-istabl-antwar' ||\n          element.id == 'schools-masakin-uthman') {\n        this.hideMapLayers(['healthcare-centers', 'quotes-istabl-antwar', 'quotes-masakin-uthman']);\n        this.showMapLayers(['schools']);\n      }\n      else if (element.id == 'healthcare-istabl-antwar' ||\n          element.id == 'healthcare-masakin-uthman') {\n        this.hideMapLayers(['schools', 'quotes-istabl-antwar', 'quotes-masakin-uthman']);\n        this.showMapLayers(['healthcare-centers']);\n      }\n      else if (element.id == 'same-problems-istabl-antwar') {\n        this.hideMapLayers(['schools', 'healthcare-centers', 'quotes-masakin-uthman']);\n        this.showMapLayers(['quotes-istabl-antwar']);\n      }\n      else if (element.id == \"same-problems-masakin-uthman\") {\n        this.hideMapLayers(['schools', 'healthcare-centers', 'quotes-istabl-antwar']);\n        this.showMapLayers(['quotes-masakin-uthman']);\n      }\n    }\n\n    hideMapLayers(layers) {\n      let mapSVG = d3.select(this.options.containers.mapSVG);\n\n      layers.forEach(function(layerName) {\n        if (layerName == 'distance') {\n          mapSVG.select('#map-svg__distance')\n            .style('visibility', 'hidden');\n        }  \n        else if (layerName == 'schools') {\n          mapSVG.select('#map-svg__schools')\n            .style('visibility', 'hidden');\n        }\n        else if (layerName == 'healthcare-centers') {\n          mapSVG.select('#map-svg__healthcare-centers')\n            .style('visibility', 'hidden');\n        }\n        else if (layerName == 'quotes-istabl-antwar') {\n          mapSVG.select('#map-svg__quotes-istabl-antwar')\n            .style('visibility', 'hidden');\n        }\n        else if (layerName == 'quotes-masakin-uthman') {\n          mapSVG.select('#map-svg__quotes-masakin-uthman')\n            .style('visibility', 'hidden');\n        }\n      });\n    }\n\n    showMapLayers(layers) {\n      let mapSVG = d3.select(this.options.containers.mapSVG);\n\n      layers.forEach(function(layerName) {\n        if (layerName == 'distance') {\n          mapSVG.select('#map-svg__distance')\n            .style('visibility', 'visible');\n        }  \n        else if (layerName == 'schools') {\n          mapSVG.select('#map-svg__schools')\n            .style('visibility', 'visible');\n        }\n        else if (layerName == 'healthcare-centers') {\n          mapSVG.select('#map-svg__healthcare-centers')\n            .style('visibility', 'visible');\n        }\n        else if (layerName == 'quotes-istabl-antwar') {\n          mapSVG.select('#map-svg__quotes-istabl-antwar')\n            .style('visibility', 'visible');\n        }\n        else if (layerName == 'quotes-masakin-uthman') {\n          mapSVG.select('#map-svg__quotes-masakin-uthman')\n            .style('visibility', 'visible');\n        }\n      });\n    }\n  }\n\n  tadamun.App = App;\n\n  window.tadamun = tadamun;\n})(window);\n"]}